<app-header></app-header>

<section layout="row">
  
    <div flex="66" layout="column">
      
        <md-card ng-controller="CaseController as caseController">
          <md-card-content>

              <div layout="row" layout-align="space-between center" layout-padding>
                  
                  <h2 class="md-title">{{ 'CASE.MY_CASES' | translate }}</h2>
              
                  <opene-list-filter list="caseController.caseFilter" 
                                     choice="caseController.caseFilterChoice"
                                     finished="caseController.getMyCases">
                  </opene-list-filter>
              </div>
              
              <div class="repeat-table">
                  <div class="repeat-header" layout="row">
                      <span class="r" flex="10"></span>
                      <span class="r" flex="30">{{ 'COMMON.TITLE' | translate }}</span>
                      <span class="r" flex="30">{{ 'COMMON.ID' | translate }}</span>
                      <span class="r" flex="30">{{ 'COMMON.MODIFIED' | translate }}</span>
                  </div>
                  <md-virtual-repeat-container md-auto-shrink style="height: 200px;">
                      <div md-virtual-repeat="case in caseController.myCases" class="repeat-item">
                          <a class="r-rowlink" ui-sref="caseinfo({'caseId': case['oe:id']})" layout="row">
                              <span class="r" flex="10"><i class="material-icons">folder_open</i></span>
                              <span class="r" flex="30">{{case["cm:title"]}}</span>
                              <span class="r muted" flex="30">{{case["oe:id"]}}</span>
                              <span class="r muted" flex="30">{{case["cm:modified"] | openeDate}}</span>
                          </a>
                      </div>
                  </md-virtual-repeat-container>
              </div>
            
          </md-card-content>
          <div class="md-actions" layout="row" layout-padding>
            <md-menu>
                <md-button class="md-primary" ng-click="$mdOpenMenu($event)" aria-label="{{ 'CASE.CREATE_NEW_CASE' | translate }}">
                    <i class="material-icons">add</i>
                    {{ 'CASE.CREATE_NEW_CASE' | translate }}
                </md-button>
                <md-menu-content>
                    <md-menu-item><md-button ng-click="caseController.createCase($event, 'standard')">{{ 'simple:case' | caseType }}</md-button></md-menu-item>
                    <md-menu-item><md-button ng-disabled="true">{{ 'CASE.CASETYPE_OTHER' | translate }}</md-button></md-menu-item>
                </md-menu-content>
            </md-menu>
          </div>
        </md-card>

        <md-card ng-controller="FileController as vm">
          <md-card-content>
            
            <h2 class="md-title">{{ 'DOCUMENT.MY_DOCUMENTS' | translate }}</h2>
            
            <div class="repeat-table">
                  <div class="repeat-header" layout="row">
                      <span class="r" flex="10"></span>
                      <span class="r" flex="30">{{ 'COMMON.NAME' | translate }}</span>
                      <span class="r" flex="30">{{ 'COMMON.MODIFIED' | translate }}</span>
                      <span class="r" flex="30">{{ 'COMMON.MODIFIED_BY' | translate }}</span>
                  </div>
                  <md-virtual-repeat-container md-auto-shrink style="height: 200px;">
                      <div md-virtual-repeat="document in vm.documents" class="repeat-item">
                          <a class="r-rowlink" href="#/cases/case/{{ document.caseId }}/doc/{{ document.location.parent.nodeRef | nodeRefUri }}" layout="row">
                              <span class="r" flex="10"><img class="md-avatar" ng-src="/app/assets/images/filetypes/{{document.thumbNailURL}}"/></span>
                              <span class="r" flex="30">{{ document.displayName }}</span>
                              <span class="r muted" flex="30">{{ document.modifiedOn | openeDate}}</span>
                              <span class="r muted" flex="30">{{ document.modifiedBy }}</span>
                              
                          </a>
                      </div>
                  </md-virtual-repeat-container>
              </div>

          </md-card-content>
        </md-card>
      
    </div>
  
    <div flex="33">

        <md-card id="dashboardTasksCard" ng-controller="tasksOverviewController as tasksCtrl">
          <md-card-content>
            <h2 class="md-title">{{ 'TASK.MY_TASKS' | translate }}</h2>
            <md-list>
              <md-list-item class="md-2-line" ng-repeat="task in tasksCtrl.tasks">
                <md-icon class="material-icons">assignment</md-icon>
                <div class="md-list-item-text">  
                  <h3>{{task.properties.bpm_description}}</h3>
                  <p>{{task.description}}</p>
                </div>
                <md-divider></md-divider>
              </md-list-item>
            </md-list>
          </md-card-content>
        </md-card>

    </div>
  
</section>

<app-footer></app-footer>