<md-dialog class="dialog-large" aria-label="">
    <form name="uploadForm" novalidate>

        <md-toolbar layout="row">
            <div class="md-toolbar-tools">
                <h2>{{ 'CASE.PRINT_CASE' | translate }} "{{dlg.case["cm:title"].value}}"</h2>
            </div>
        </md-toolbar>

        <md-dialog-content>
            <md-checkbox ng-model="dlg.caseDetails" aria-label="Details" ng-change="dlg.onSelectionChanged()">
                {{"CASE.CASE_DETAILS" | translate}}
            </md-checkbox>
            <md-checkbox ng-model="dlg.caseHistoryLog" aria-label="History" ng-change="dlg.onSelectionChanged()">
                {{"CASE.CASE_HISTORY_LOG" | translate}}
            </md-checkbox>
            <md-checkbox ng-model="dlg.comments" aria-label="Comments" ng-change="dlg.onSelectionChanged()">
                {{"CASE.COMMENTS" | translate}}
            </md-checkbox>
            <h3>{{"DOCUMENT.DOCUMENTS" | translate}}</h3>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>{{'COMMON.TITLE' | translate}}</th>
                        <th>{{'COMMON.NO' | translate}}</th>
                        <th>{{'COMMON.TYPE' | translate}}</th>
                        <th>{{'COMMON.CATEGORY' | translate}}</th>
                        <th>{{'COMMON.STATE' | translate}}</th>
                        <th>{{'COMMON.OWNER' | translate}}</th>
                        <th>{{'COMMON.CREATED' | translate}}</th>
                        <th>{{'COMMON.MODIFIED' | translate}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat-start="doc in dlg.documents">
                        <td>
                            <span ng-if="doc.attachments.length > 0 && doc.expanded" ng-click="doc.expanded = false" class="collapse"></span>
                            <span ng-if="doc.attachments.length > 0 && !doc.expanded" ng-click="doc.expanded = true" class="expand"></span>
                        </td>
                        <td>
                            <div style="display: inline-flex;">
                                <md-checkbox ng-model="doc.selected" aria-label="checkbox" ng-change="dlg.onSelectionChanged()">{{doc.title}}</md-checkbox>
                            </div>
                        </td>
                        <td></td>
                        <td>{{doc.typeDisplayName}}</td>
                        <td>{{doc.categoryDisplayName}}</td>
                        <td>{{doc.status | docStatus}}</td>
                        <td>{{doc.owner.firstName + " " + doc.owner.lastName}}</td>
                        <td>{{doc.created | date}}</td>
                        <td>{{doc.modified | date}}</td>
                    </tr>
                    <tr ng-if="doc.attachments.length > 0 && doc.expanded" ng-repeat-end="">
                        <td style="padding-left: 50px;" colspan="9">
                            <div ng-repeat="attachment in doc.attachments">
                                <md-checkbox ng-model="attachment.selected" aria-label="checkbox" ng-change="dlg.onSelectionChanged()">
                                    {{attachment.name}}
                                </md-checkbox>
                            </div>
                        </td>
                    </tr>
                    <!-- <tr style="display:none" ng-repeat-end></tr> -->
                </tbody>
            </table>
        </md-dialog-content>

        <md-dialog-actions>
            <md-button class="md-primary" ng-click="dlg.print()" ng-disabled="dlg.formDisabled">
                {{ 'CASE.PRINT_CASE' | translate }}
            </md-button>
            <md-button ng-click="dlg.cancel()">
                {{ 'COMMON.CANCEL' | translate }}
            </md-button>
        </md-dialog-actions>
    </form>
</md-dialog>
