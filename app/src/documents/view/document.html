<app-header></app-header>

<md-content layout="column">
    <div class="sub-toolbar md-whiteframe-3dp">
        <div layout="row" layout-align="space-between center" layout-padding>
            <div layout="row" layout-align="start center">
                <md-button ng-href="#/cases/case/{{docCtrl.caseId}}" ng-if="docCtrl.caseId">
                    <i class="material-icons" style="vertical-align: middle;">arrow_back</i>
                    {{ docCtrl.caseId}}
                </md-button>
                <md-button ng-href="#/" ng-if="!docCtrl.caseId">
                    <i class="material-icons" style="vertical-align: middle;">arrow_back</i>
                    {{ 'COMMON.HOME' | translate }}
                </md-button>
                <h1 class="md-headline">
                    {{ docCtrl.doc.title}}
                    <span class="muted">({{docCtrl.doc.status| docStatus}})</span>
                </h1>
            </div>

            <!-- TODO: This and the case status menu in case.html could probably be refactored into some shared code -->
            <md-menu>
                <md-button class="md-primary" ng-click="$mdOpenMenu($event)"
                           aria-label="{{ 'DOCUMENT.CHANGE_STATUS' | translate }}"
                           ng-disabled="docCtrl.doc.statusChoices.length == 0">
                    {{ 'DOCUMENT.CHANGE_STATUS' | translate }}
                </md-button>
                <md-menu-content>
                    <md-menu-item ng-repeat="choiceName in docCtrl.doc.statusChoices">
                        <md-button ng-class="{'current-choice': choiceName === docCtrl.doc.status}"
                                   ng-disabled="choiceName === docCtrl.doc.status"
                                   aria-label="{{ choiceName | docStatus }}"
                                   ng-click="docCtrl.changeDocumentStatus(choiceName)">
                            {{ choiceName | docStatus }}
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>

        </div>
    </div>

    <ng-include src="'app/src/documents/view/documentDetails.html'"></ng-include>
</md-content>

<app-footer></app-footer>
