<app-header></app-header>
<md-tabs md-dynamic-height>
    <md-tab>
        <md-tab-label>
          <span>{{ 'CASE.CASE_HOME' | translate }}</span>
        </md-tab-label>
        <md-tab-body>
            <div layout="row" layout-wrap>
                <div flex="10">
                    <md-card>
                        <md-card-content>
                            <md-button class="md-primary" href="#/cases/case/{{docCtrl.caseId}}">{{ 'COMMON.BACK' | translate }}</md-button>
                        </md-card-content>
                    </md-card>
                </div>
                <div flex="100">
                    <md-card>
                        <md-card-content>
                            <h3>{{ 'DOCUMENT.DOCUMENT' | translate }}</h3>
                            <table>
                                <tr>
                                    <td>
                                        <dl>
                                            <dt>{{ 'DOCUMENT.TITLE' | translate }}</dt><dd>{{ docCtrl.doc.name }}</dd>
                                            <dt>{{ 'DOCUMENT.STATE' | translate }}</dt><dd>{{ docCtrl.doc.state | docState}}</dd>
                                            <dt>{{ 'DOCUMENT.TYPE' | translate }}</dt><dd>{{ docCtrl.doc.type | docType}}</dd>
                                            <dt>{{ 'DOCUMENT.CATEGORY' | translate }}</dt><dd>{{ docCtrl.doc.category | docCategory}}</dd>
                                            <dt>{{ 'DOCUMENT.OWNER' | translate }}</dt><dd>{{ docCtrl.doc.owner }}</dd>
                                            <dt>{{ 'COMMON.CREATED' | translate }}</dt><dd>{{ docCtrl.doc.created | date }}</dd>
                                        </dl>
                                    </td>
                                    <td>
                                        <dl>
                                            <dt>{{ 'DOCUMENT.VERSION' | translate }}</dt>
                                                <dd>
                                                    <select ng-model="docCtrl.docVersion" ng-options="version.label for version in docCtrl.documentVersions"></select>
                                                </dd>
                                            <dt>{{ 'DOCUMENT.VERSION_ADDED' | translate }}</dt><dd>{{docCtrl.docVersion.createdDateISO | date: 'yyyy-MM-dd'}}</dd>
                                            <dt>{{ 'DOCUMENT.DOCUMENT_NAME' | translate }}</dt><dd>{{ docCtrl.docVersion.name}}</dd>
                                            <dt>{{ 'DOCUMENT.VERSION_DESCRIPTION' | translate }}</dt><dd>{{ docCtrl.docVersion.description }}</dd>
                                        </dl>
                                    </td>
                                </tr>
                            </table>
                        </md-card-content>
                        <div class="md-actions" layout="row">
                          <md-button class="md-primary" ng-disabled="true">{{ 'DOCUMENT.EDIT_DOCUMENT' | translate }}</md-button>
                          <md-button class="md-primary" ng-click="docCtrl.uploadDocNewVersion()">{{ 'DOCUMENT.UPLOAD_NEW_VERSION' | translate }}</md-button>
                          <md-button class="md-primary" ng-click="docCtrl.downloadDocument()">{{ 'COMMON.DOWNLOAD' | translate }}</md-button>
                          <md-button class="md-primary" ng-click="docCtrl.previewDocument()">{{ 'DOCUMENT.OPEN_PREVIEW' | translate }}</md-button>
                          <md-button class="md-primary" ng-click="docCtrl.editDocumentProperties()">{{ 'DOCUMENT.EDIT_PROPERTIES' | translate }}</md-button>
                        </div>
                    </md-card>
                 </div>
                 <div flex="100">
                    <md-card>
                        <md-card-content>
                            <h3>{{ 'DOCUMENT.ATTACHMENTS' | translate }}</h3>
                            <table>
                                <thead>
                                  <tr>
                                    <th>{{ 'DOCUMENT.ATTACHMENTS.TITLE' | translate }}</th>
                                    <th>{{ 'COMMON.ADDED' | translate }}</th>
                                    <th>{{ 'COMMON.ADDED_BY' | translate }}</th>
                                    <th>{{ 'DOCUMENT.ATTACHMENTS.CURRENT_VERSION' | translate }}</th>
                                    <th></th>
                                  </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat-start="attachment in docCtrl.attachments">
                                        <td>{{attachment.name}}</td>
                                        <td>{{attachment.created | date: 'yyyy-MM-dd'}}</td>
                                        <td>{{attachment.creator.firstName + ' ' + attachment.creator.lastName}}</td>
                                        <td>{{attachment.versionLabel}}</td>
                                        <td>
                                            <md-menu>
                                                 <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button" style="font-size: 11px;">
                                                   {{ 'COMMON.ACTIONS' | translate }}
                                                 </md-button>
                                                 <md-menu-content>
                                                    <md-menu-item><md-button ng-disabled="true">{{'DOCUMENT.ATTACHMENTS.EDIT_ATTACHMENT' | translate }}</md-button></md-menu-item>
                                                    <md-menu-item><md-button ng-click="docCtrl.uploadAttachmentNewVersion(attachment)">{{ 'DOCUMENT.UPLOAD_NEW_VERSION' | translate }}</md-button></md-menu-item>
                                                    <md-menu-item><md-button ng-click="docCtrl.previewAttachment(attachment)">{{ 'DOCUMENT.OPEN_PREVIEW' | translate }}</md-button></md-menu-item>
                                                    <md-menu-item><md-button ng-click="docCtrl.downloadAttachment(attachment)">{{ 'COMMON.DOWNLOAD' | translate }}</md-button></md-menu-item>
                                                 </md-menu-content>
                                            </md-menu>
                                       </td>
                                    </tr>
                                        <tr ng-repeat="attachmentVersion in attachment.versions" style="color: rgba(0,0,0,0.26);">
                                            <td style="padding-left: 50px;">{{attachmentVersion.name}}</td>
                                            <td>{{attachmentVersion.created | date: 'yyyy-MM-dd'}}</td>
                                            <td>{{attachmentVersion.creator.firstName + ' ' + attachmentVersion.creator.lastName}}</td>
                                            <td>{{attachmentVersion.versionLabel}}</td>
                                            <td>
                                                <md-menu>
                                                     <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button"  style="font-size: 11px;">
                                                       {{ 'COMMON.ACTIONS' | translate }}
                                                     </md-button>
                                                     <md-menu-content>
                                                        <md-menu-item><md-button ng-click="docCtrl.previewAttachment(attachmentVersion)">{{ 'DOCUMENT.OPEN_PREVIEW' | translate }}</md-button></md-menu-item>
                                                        <md-menu-item><md-button ng-click="docCtrl.downloadAttachment(attachmentVersion)">{{ 'COMMON.DOWNLOAD' | translate }}</md-button></md-menu-item>
                                                     </md-menu-content>
                                                </md-menu>
                                           </td>
                                        </tr>
                                    <tr style="display:none" ng-repeat-end></tr>
                                </tbody>
                            </table>
                            Pages: <button ng-repeat="page in docCtrl.attachmentsPages" ng-click="docCtrl.loadAttachments(page)">{{page}}</button>
                        </md-card-content>
                        <div class="md-actions" layout="row">
                          <md-button class="md-primary" ng-click="docCtrl.uploadAttachment()">{{ 'DOCUMENT.ATTACHMENTS.UPLOAD_NEW_ATTACHMENT' | translate }}</md-button>
                        </div>
                    </md-card>
                 </div>
            </div>
        </md-tab-body>
    </md-tab>
</md-tabs>

<app-footer></app-footer>