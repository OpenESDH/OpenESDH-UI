<md-card ng-controller="DocumentController as docCtrl">
    <md-card-content style="min-height: 400px;">
        <h3 class="md-title">{{ 'DOCUMENT.DOCUMENTS' | translate }}</h3>

        <div class="repeat-table">
            <div class="repeat-header" layout="row">
                <span layout="row" flex="80">
                    <span class="r" flex="5"></span>
                    <span class="r" flex>{{ 'COMMON.TITLE' | translate }}</span>
                    <span class="r" flex="15">{{ 'COMMON.TYPE' | translate }}</span>
                    <span class="r" flex="15">{{ 'COMMON.CATEGORY' | translate }}</span>
                    <span class="r" flex="20">{{ 'COMMON.CREATEDBY' | translate }}</span>
                    <span class="r" flex="20">{{ 'COMMON.MODIFIED' | translate }}</span>
                </span>
                <span flex="20"></span>
            </div>
            <md-virtual-repeat-container md-auto-shrink>
                <div md-virtual-repeat="doc in docCtrl.documents" class="repeat-item" layout="row">
                    <a class="r-rowlink" href="#/cases/case/{{docCtrl.caseId}}/doc/{{doc.nodeRef| nodeRefUri}}" layout="row" flex="80">
                        <span class="r" flex="5"><img class="md-avatar" ng-src="/app/assets/images/filetypes/{{doc.thumbNailURL}}"/></span>
                        <span class="r" flex>{{ doc["cm:title"] }}</span>
                        <span class="r muted" flex="15">{{ doc["doc:type"] }}</span>
                        <span class="r muted" flex="15">{{ doc["doc:category"] }}</span>
                        <span class="r muted" flex="20">
                            <span ng-repeat="owner in doc['doc:owner']">{{owner.fullname}}</span>
                        </span>
                        <span class="r muted" flex="20">{{ doc["cm:modified"] | openeDate }}</span>
                    </a>
                    <span flex="10">
                        <md-button class="md-primary" ng-click="docCtrl.previewDocument(doc.mainDocNodeRef)">{{ 'COMMON.PREVIEW' | translate }}</md-button>
                    </span>
                    <span flex="10">
                        <md-button class="md-primary" ng-click="docCtrl.deleteDocument(doc)" ng-show="docCtrl.isAdmin">{{ 'COMMON.DELETE' | translate }}</md-button>
                    </span>
                </div>
            </md-virtual-repeat-container>
        </div>

    </md-card-content>
    <div class="md-actions" layout="row" layout-padding>
        <md-button class="md-primary"
                   ng-click="docCtrl.uploadDocument()"
                   ng-disabled="caseIsLocked">
            <i class="material-icons">file_upload</i>
            {{ 'DOCUMENT.UPLOAD_NEW_DOCUMENTS' | translate }}
        </md-button>
        <div ng-include="'app/src/documents/view/caseDocumentsSend.html'"></div>
        <md-button class="md-primary"
                   ng-click="docCtrl.createDocumentFromTemplate()"
                   ng-disabled="caseIsLocked">
            {{ 'DOCUMENT.CREATE_FROM_TEMPLATE' | translate }}
        </md-button>
    </div>
</md-card>