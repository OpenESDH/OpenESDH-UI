<md-card ng-controller="DocumentController as docCtrl">
    <md-card-content style="min-height: 400px;">
        <h3 class="md-title">{{ 'DOCUMENT.DOCUMENTS' | translate }}</h3>

        <div class="repeat-table">
            <div class="repeat-header">
                <span layout="row" flex>
                    <span class="r" flex="5"></span>
                    <span class="r" flex sort-table="cm:title">{{ 'COMMON.TITLE' | translate }}</span>
                    <span class="r" flex="15" sort-table="doc:type">{{ 'COMMON.TYPE' | translate }}</span>
                    <span class="r" flex="15" sort-table="doc:category">{{ 'COMMON.CATEGORY' | translate }}</span>
                    <span class="r" flex="20" sort-table="doc:owner.0.fullname">{{ 'COMMON.CREATEDBY' | translate }}</span> <!-- might not be convenient to sort if multiple owner -->
                    <span class="r" flex="20" sort-table="cm:modified">{{ 'COMMON.MODIFIED' | translate }}</span>
                </span>
            </div>
            <md-virtual-repeat-container md-auto-shrink>
                <div md-virtual-repeat="doc in docCtrl.documents | orderObjectBy:orderByAttribute:reverseOrder" class="repeat-item {{ doc['oe:lockedDate'] ? 'muted' : '' }}" ng-disabled="doc['oe:lockedDate']">
                    <a class="r-rowlink" 
                       href="#/cases/case/{{docCtrl.caseId}}/doc/{{doc.nodeRef| nodeRefUri}}" 
                       layout="row">
                        <span class="r" flex="5"><img class="md-avatar" ng-src="/app/assets/images/filetypes/{{doc.thumbNailURL}}"/></span>
                        <span class="r" flex>{{ doc["cm:title"] }}</span>
                        <span class="r muted" flex="15">
                            <i class="material-icons" ng-show="doc['office:fromOutlook']" title="{{ 'DOCUMENT.SENT_FROM_OUTLOOK' | translate}}" style="padding-right: 5px;">email</i>
                            {{ doc["doc:type"] }}
                        </span>
                        <span class="r muted" flex="15">{{ doc["doc:category"] }}</span>
                        <span class="r muted" flex="20">
                            <span ng-repeat="owner in doc['doc:owner']">{{owner.fullname}}</span>
                        </span>
                        <span class="r muted" flex="20">{{ doc["cm:modified"] | openeDate }}</span>
                    </a>
                </div>
            </md-virtual-repeat-container>
        </div>

    </md-card-content>
    <div class="md-actions" layout="row" layout-padding>
        <md-button class="md-primary"
                   ng-click="docCtrl.uploadDocument()"
                   ng-disabled="caseCtrl.caseIsLocked">
            <i class="material-icons">file_upload</i>
            {{ 'DOCUMENT.UPLOAD_NEW_DOCUMENTS' | translate }}
        </md-button>
        <div ng-include="'app/src/documents/view/caseDocumentsSend.html'"></div>
        <md-button class="md-primary"
                   ng-click="docCtrl.createDocumentFromTemplate()"
                   ng-disabled="caseCtrl.caseIsLocked">
            {{ 'DOCUMENT.CREATE_FROM_TEMPLATE' | translate }}
        </md-button>
    </div>
</md-card>